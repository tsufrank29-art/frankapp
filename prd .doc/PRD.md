# PRD 產品需求文件 — 股神俱樂部功能頁

## 一、PRD for UI
### 1. 功能名稱＆簡介
**功能名稱：** 股神俱樂部 APP 功能頁（房間社群 + 操作計畫）  
**簡介：** 提供房間總覽、加入/創建房間、操作計畫管理、留言互動與個人主頁的單頁式 App UI 原型，模擬完整使用流程。

### 2. 目標用戶
- 對投資主題社群有需求的使用者
- 需透過「房間」形式聚合投資計畫、追蹤他人策略的使用者
- 需要簡易分享/留言功能的操作計畫協作成員

### 3. 用戶需求
- 快速瀏覽可加入的房間並立即進入房間內容
- 在自己房間建立操作計畫並管理（新增/編輯/刪除）
- 對操作計畫留言互動
- 清楚看到自己創建與加入的房間清單
- 行動裝置上順暢的固定導覽與內容捲動體驗

### 4. 如何驗證用戶有此需求/問題
- 使用者訪談：投資社群希望在單一畫面快速切換房間、看策略摘要
- 行為觀察：高頻使用「加入房間 → 立即查看內容 → 留言」流程
- 可用性測試：檢驗固定 Header / 底部導覽是否影響可讀性與操作效率

### 5. 功能概述
- Screen 01：房間總覽（可加入/排序）
- Screen 02：我創建的房間（操作計畫管理）
- Screen 03：我加入的房間（快速進入）
- Screen 04：房間頁-訪客（查看計畫/留言/退出）
- Screen 05：個人主頁（暱稱、創建/加入房間摘要）
- 全域：固定 Header、底部導覽、彈窗、Toast

### 6. 商業目的
- 提升社群互動與房間活躍度
- 促進使用者留存與回訪（透過操作計畫更新與留言互動）
- 為後續付費房間或進階數據服務鋪路

### 7. 成功指標
- 房間加入轉換率（查看總覽 → 加入）
- 操作計畫建立率（創建房間 → 新增計畫）
- 互動率（留言/每房間平均留言數）
- 7 日留存率、房間回訪率

---

## 二、產品功能與說明
### 1. Workflow
1. 進入 App（預設 Screen 01）
2. 瀏覽房間總覽 → 加入房間 → 立即進入訪客房間頁
3. 在房間頁查看操作計畫與留言
4. 切換到「我創建的房間」管理自己的操作計畫
5. 透過底部分頁或 Header 快速切換頁面
6. 在個人主頁檢視自己的房間資訊

### 2. Flow Chart
```mermaid
flowchart TD
    A[開啟 App / Screen 01] --> B{選擇操作}
    B -->|加入房間| C[加入成功 Toast]
    C --> D[進入訪客房間 Screen 04]
    D --> E[查看操作計畫]
    E --> F[留言互動]
    B -->|創建房間| G[創建彈窗]
    G --> H[創建成功 Toast]
    H --> I[進入我創建的房間 Screen 02]
    I --> J[新增/編輯/刪除操作計畫]
    J --> K[操作計畫更新]
    B -->|查看個人主頁| L[Screen 05]
```

### 3. Wireframe
- **Header：** 左側為「股神俱樂部」標題（回首頁），右側包含「創建房間」與頭像按鈕。
- **底部導覽列：** 房間總覽 / 我創建的房間 / 我加入的房間
- **內容區：** 以卡片呈現房間與操作計畫；操作計畫卡片含欄位摘要與互動按鈕
- **彈窗：** 創建房間、操作計畫表單、留言、確認刪除/移除/退出

### 4. 功能說明（依 Screen 區分：給前端 / 給後端）
#### Screen 01｜房間總覽
**給前端**
- **資料內容（API）：** `GET /rooms?excludeOwned=true&sort=member_desc`，回傳房間清單（房名、房主暱稱、人數、週期、前三筆操作標的摘要、是否已加入）。
- **交互行為：** 點擊「加入房間」→ 顯示成功 Toast → 立即導向 Screen 04；已加入房間顯示「進入房間」。
- **內容區塊：** 排序按鈕、房間卡片列表、空狀態提示。

**給後端（流程邏輯）**
- 依查詢參數排序與過濾（排除自有房間）。
- 回傳房間摘要與加入狀態，提供前端決定按鈕文案。

#### Screen 02｜我創建的房間
**給前端**
- **資料內容（API）：** `GET /rooms/owned`（房間主檔＋操作計畫列表＋留言）。
- **交互行為：** 新增/編輯/刪除操作計畫（彈窗表單）；新增留言；移除房間後顯示空狀態。
- **內容區塊：** 房間標題區（房名/人數/新增按鈕）、操作計畫卡片、留言區、移除房間按鈕。

**給後端（流程邏輯）**
- 操作計畫 CRUD 與留言寫入（權限：房主）。
- 移除房間時需刪除操作計畫與留言，並更新關聯成員。

#### Screen 03｜我加入的房間
**給前端**
- **資料內容（API）：** `GET /rooms/joined`，回傳加入房間清單與摘要欄位。
- **交互行為：** 點擊「進入房間」導向 Screen 04；排序人數多→少。
- **內容區塊：** 排序按鈕、房間卡片列表、空狀態提示。

**給後端（流程邏輯）**
- 依使用者關聯回傳加入房間清單。
- 依排序參數回傳排序後清單。

#### Screen 04｜房間頁-訪客
**給前端**
- **資料內容（API）：** `GET /rooms/:id`（房間詳情＋操作計畫＋留言）。
- **交互行為：** 留言彈窗送出；退出房間→導回 Screen 03。
- **內容區塊：** 房間資訊區、操作計畫卡片與留言區、退出房間按鈕。

**給後端（流程邏輯）**
- 讀取房間詳情與計畫/留言列表。
- `POST /rooms/:id/leave` 移除成員並更新 member_count。
- `POST /operations/:id/comments` 新增留言。

#### Screen 05｜個人主頁
**給前端**
- **資料內容（API）：** `GET /me`，回傳暱稱、創建房間、加入房間摘要。
- **交互行為：** 點擊頭像導向個人主頁；純展示為主。
- **內容區塊：** 暱稱、創建房間摘要、加入房間摘要。

**給後端（流程邏輯）**
- 彙整使用者房間關係，回傳摘要資訊。

### 5. 後端需求（API 規劃與資料欄位）
**核心資源：** users、rooms、room_members、operations、operation_comments

**API 範例：**
- `GET /rooms?excludeOwned=true&sort=member_desc`
- `POST /rooms`（創建房間）
- `GET /rooms/owned` / `GET /rooms/joined`
- `POST /rooms/:id/join` / `POST /rooms/:id/leave`
- `GET /rooms/:id`
- `POST /rooms/:id/operations` / `PATCH /operations/:id` / `DELETE /operations/:id`
- `POST /operations/:id/comments`

**資料欄位建議（操作計畫）：**
- stock_code, stock_name, plan_date
- position_pct, entry_condition, entry_range_min, entry_range_max
- add_condition, stop_loss_condition, take_profit_condition
- target_price, note
